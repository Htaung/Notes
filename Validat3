import java.util.ArrayList;
import java.util.List;

@FunctionalInterface
public interface Validator<T> {
    List<ValidationResult> validate(T t);

    // Combine validators and collect results
    default Validator<T> and(Validator<T> other) {
        return t -> {
            List<ValidationResult> results = new ArrayList<>(this.validate(t));
            results.addAll(other.validate(t)); // Safely add results from the other validator
            return results;
        };
    }
}

class ValidationResult {
    private final boolean valid;
    private final String message;

    private ValidationResult(boolean valid, String message) {
        this.valid = valid;
        this.message = message;
    }

    public static ValidationResult success() {
        return new ValidationResult(true, null);
    }

    public static ValidationResult failure(String message) {
        return new ValidationResult(false, message);
    }

    public boolean isValid() {
        return valid;
    }

    public String getMessage() {
        return message;
    }
}


import java.util.Collections;
import java.util.List;

public class UserValidators {
    public static final Validator<User> nameNotEmpty = user -> {
        if (user.getName() != null && !user.getName().isEmpty()) {
            return Collections.emptyList(); // No errors
        } else {
            return List.of(ValidationResult.failure("Name must not be empty"));
        }
    };

    public static final Validator<User> ageGreaterThan18 = user -> {
        if (user.getAge() > 18) {
            return Collections.emptyList(); // No errors
        } else {
            return List.of(ValidationResult.failure("Age must be greater than 18"));
        }
    };
}





